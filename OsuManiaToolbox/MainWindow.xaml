<Window x:Class="OsuManiaToolbox.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:OsuManiaToolbox"
        xmlns:regrade="clr-namespace:OsuManiaToolbox.Regrade"
        mc:Ignorable="d"
        d:DataContext="{d:DesignInstance Type=local:MainWindow, IsDesignTimeCreatable=True}"
        Title="MainWindow" Height="450" Width="800">
  <Window.Resources>
    
  </Window.Resources>
  <Grid ShowGridLines="True">
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="6*"/>
      <ColumnDefinition Width="4*"/>
    </Grid.ColumnDefinitions>
    <Grid ShowGridLines="True">
      <Grid.Resources>
        <Style TargetType="TextBox">
          <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
        <Style TargetType="CheckBox">
          <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
        <Style TargetType="Button">
          <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
      </Grid.Resources>
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
      </Grid.RowDefinitions>
      <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition Width="6*"/>
      </Grid.ColumnDefinitions>
      <Label Content="通用设置"/>
      <WrapPanel Grid.Column="1" Orientation="Horizontal">
        <StackPanel Orientation="Horizontal">
          <Label Content="osu路径"/>
          <TextBox Text="{Binding Settings.OsuPath}" MinWidth="200"/>
        </StackPanel>
        <StackPanel Orientation="Horizontal">
          <Label Content="写入DB时备份"/>
          <CheckBox IsChecked="{Binding Settings.BackupDb}"/>
        </StackPanel>
      </WrapPanel>
      
      <Label Grid.Row="1" Content="成绩评级"/>
      <WrapPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal">
        <ItemsControl ItemsSource="{Binding Settings.Regrade.GradeThresholds}">
          <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
              <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
          </ItemsControl.ItemsPanel>
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <StackPanel Orientation="Horizontal">
                <Label Content="{Binding Grade}"/>
                <TextBox Text="{Binding Acc}" MinWidth="20" />
              </StackPanel>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>

        <ItemsControl ItemsSource="{Binding Settings.Regrade.ModGradeStrategyIndexes}">
          <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
              <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
          </ItemsControl.ItemsPanel>
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <StackPanel Orientation="Horizontal">
                <Label Content="{Binding ModAcronym}"/>
                <ComboBox ItemsSource="{x:Static regrade:GradeStrategy.All}" DisplayMemberPath="Name"
                          SelectedIndex="{Binding Index}"/>
              </StackPanel>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>

        <Button Content="重新评级" Command="{Binding Regrade.RegradeCommand}"/>
      </WrapPanel>
    </Grid>
    
    <RichTextBox Name="logTextBox" Grid.Column="1" IsReadOnly="True"/>
  </Grid>
</Window>
